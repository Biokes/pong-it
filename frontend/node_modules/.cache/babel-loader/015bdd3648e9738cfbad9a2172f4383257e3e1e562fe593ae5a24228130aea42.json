{"ast":null,"code":"var _jsxFileName = \"/home/praise/pong-it/frontend/src/components/GameOver.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport { STORAGE_KEY, BACKEND_URL } from '../constants';\nimport '../styles/GameOver.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameOver = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const result = location.state;\n  const socketRef = useRef(null);\n  const [rematchRequested, setRematchRequested] = useState(false);\n  const [waitingForResponse, setWaitingForResponse] = useState(false);\n  useEffect(() => {\n    if (!result) {\n      navigate('/');\n      return;\n    }\n    const username = localStorage.getItem(STORAGE_KEY);\n    if (!username) {\n      navigate('/');\n      return;\n    }\n    const socket = io(BACKEND_URL, {\n      withCredentials: true,\n      transports: ['websocket'],\n      path: '/socket.io/',\n      query: {\n        username\n      }\n    });\n    socketRef.current = socket;\n    socket.on('rematchRequested', data => {\n      setRematchRequested(true);\n    });\n    socket.on('gameStart', data => {\n      navigate('/multiplayer', {\n        state: {\n          gameMode: 'rematch',\n          rematch: true\n        }\n      });\n    });\n    socket.on('rematchDeclined', () => {\n      alert('Opponent declined rematch');\n      setWaitingForResponse(false);\n      setRematchRequested(false);\n    });\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, [result, navigate]);\n  if (!result) {\n    return null;\n  }\n  const handleRematch = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('requestRematch');\n      setWaitingForResponse(true);\n    }\n  };\n  const handleAcceptRematch = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('rematchResponse', {\n        accepted: true\n      });\n    }\n  };\n  const handleDeclineRematch = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('rematchResponse', {\n        accepted: false\n      });\n      setRematchRequested(false);\n    }\n  };\n  const handleGoHome = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('leaveRoom');\n      socketRef.current.disconnect();\n    }\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-over\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: result.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Final Score: \", result.finalScore[0], \" - \", result.finalScore[1]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"New Rating: \", result.rating]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Game Duration: \", Math.round((result.stats.duration || 0) / 1000), \"s\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total Hits: \", result.stats.hits || 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), rematchRequested && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rematch-request\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Opponent wants a rematch!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAcceptRematch,\n          className: \"accept-btn\",\n          children: \"Accept Rematch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDeclineRematch,\n          className: \"decline-btn\",\n          children: \"Decline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), !rematchRequested && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRematch,\n        disabled: waitingForResponse,\n        className: \"rematch-btn\",\n        children: waitingForResponse ? 'Waiting for opponent...' : 'Request Rematch'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleGoHome,\n        className: \"home-btn\",\n        children: \"Back to Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(GameOver, \"YKT35yg01dAtu0403yoep3R7dSg=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = GameOver;\nexport default GameOver;\nvar _c;\n$RefreshReg$(_c, \"GameOver\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useLocation","useNavigate","io","STORAGE_KEY","BACKEND_URL","jsxDEV","_jsxDEV","GameOver","_s","location","navigate","result","state","socketRef","rematchRequested","setRematchRequested","waitingForResponse","setWaitingForResponse","username","localStorage","getItem","socket","withCredentials","transports","path","query","current","on","data","gameMode","rematch","alert","removeAllListeners","disconnect","handleRematch","emit","handleAcceptRematch","accepted","handleDeclineRematch","handleGoHome","className","children","message","fileName","_jsxFileName","lineNumber","columnNumber","finalScore","rating","Math","round","stats","duration","hits","onClick","disabled","_c","$RefreshReg$"],"sources":["/home/praise/pong-it/frontend/src/components/GameOver.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport { STORAGE_KEY, BACKEND_URL } from '../constants';\nimport '../styles/GameOver.css';\n\nconst GameOver = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const result = location.state;\n  const socketRef = useRef(null);\n  const [rematchRequested, setRematchRequested] = useState(false);\n  const [waitingForResponse, setWaitingForResponse] = useState(false);\n\n  useEffect(() => {\n    if (!result) {\n      navigate('/');\n      return;\n    }\n\n    const username = localStorage.getItem(STORAGE_KEY);\n    if (!username) {\n      navigate('/');\n      return;\n    }\n\n    const socket = io(BACKEND_URL, {\n      withCredentials: true,\n      transports: ['websocket'],\n      path: '/socket.io/',\n      query: { username }\n    });\n\n    socketRef.current = socket;\n\n    socket.on('rematchRequested', (data) => {\n      setRematchRequested(true);\n    });\n\n    socket.on('gameStart', (data) => {\n      navigate('/multiplayer', {\n        state: {\n          gameMode: 'rematch',\n          rematch: true\n        }\n      });\n    });\n\n    socket.on('rematchDeclined', () => {\n      alert('Opponent declined rematch');\n      setWaitingForResponse(false);\n      setRematchRequested(false);\n    });\n\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, [result, navigate]);\n\n  if (!result) {\n    return null;\n  }\n\n  const handleRematch = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('requestRematch');\n      setWaitingForResponse(true);\n    }\n  };\n\n  const handleAcceptRematch = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('rematchResponse', { accepted: true });\n    }\n  };\n\n  const handleDeclineRematch = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('rematchResponse', { accepted: false });\n      setRematchRequested(false);\n    }\n  };\n\n  const handleGoHome = () => {\n    if (socketRef.current) {\n      socketRef.current.emit('leaveRoom');\n      socketRef.current.disconnect();\n    }\n    navigate('/');\n  };\n\n  return (\n    <div className=\"game-over\">\n      <h1>{result.message}</h1>\n      <div className=\"stats\">\n        <p>Final Score: {result.finalScore[0]} - {result.finalScore[1]}</p>\n        <p>New Rating: {result.rating}</p>\n        <p>Game Duration: {Math.round((result.stats.duration || 0) / 1000)}s</p>\n        <p>Total Hits: {result.stats.hits || 0}</p>\n      </div>\n\n      {rematchRequested && (\n        <div className=\"rematch-request\">\n          <p>Opponent wants a rematch!</p>\n          <div className=\"button-group\">\n            <button onClick={handleAcceptRematch} className=\"accept-btn\">\n              Accept Rematch\n            </button>\n            <button onClick={handleDeclineRematch} className=\"decline-btn\">\n              Decline\n            </button>\n          </div>\n        </div>\n      )}\n\n      {!rematchRequested && (\n        <div className=\"button-group\">\n          <button\n            onClick={handleRematch}\n            disabled={waitingForResponse}\n            className=\"rematch-btn\"\n          >\n            {waitingForResponse ? 'Waiting for opponent...' : 'Request Rematch'}\n          </button>\n          <button onClick={handleGoHome} className=\"home-btn\">\n            Back to Home\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameOver; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,OAAOC,EAAE,MAAM,kBAAkB;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,cAAc;AACvD,OAAO,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAMC,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAC9B,MAAMU,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAC9B,MAAMU,MAAM,GAAGF,QAAQ,CAACG,KAAK;EAC7B,MAAMC,SAAS,GAAGf,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACgB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACiB,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EAEnEF,SAAS,CAAC,MAAM;IACd,IAAI,CAACc,MAAM,EAAE;MACXD,QAAQ,CAAC,GAAG,CAAC;MACb;IACF;IAEA,MAAMQ,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAACjB,WAAW,CAAC;IAClD,IAAI,CAACe,QAAQ,EAAE;MACbR,QAAQ,CAAC,GAAG,CAAC;MACb;IACF;IAEA,MAAMW,MAAM,GAAGnB,EAAE,CAACE,WAAW,EAAE;MAC7BkB,eAAe,EAAE,IAAI;MACrBC,UAAU,EAAE,CAAC,WAAW,CAAC;MACzBC,IAAI,EAAE,aAAa;MACnBC,KAAK,EAAE;QAAEP;MAAS;IACpB,CAAC,CAAC;IAEFL,SAAS,CAACa,OAAO,GAAGL,MAAM;IAE1BA,MAAM,CAACM,EAAE,CAAC,kBAAkB,EAAGC,IAAI,IAAK;MACtCb,mBAAmB,CAAC,IAAI,CAAC;IAC3B,CAAC,CAAC;IAEFM,MAAM,CAACM,EAAE,CAAC,WAAW,EAAGC,IAAI,IAAK;MAC/BlB,QAAQ,CAAC,cAAc,EAAE;QACvBE,KAAK,EAAE;UACLiB,QAAQ,EAAE,SAAS;UACnBC,OAAO,EAAE;QACX;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;IAEFT,MAAM,CAACM,EAAE,CAAC,iBAAiB,EAAE,MAAM;MACjCI,KAAK,CAAC,2BAA2B,CAAC;MAClCd,qBAAqB,CAAC,KAAK,CAAC;MAC5BF,mBAAmB,CAAC,KAAK,CAAC;IAC5B,CAAC,CAAC;IAEF,OAAO,MAAM;MACXM,MAAM,CAACW,kBAAkB,CAAC,CAAC;MAC3BX,MAAM,CAACY,UAAU,CAAC,CAAC;IACrB,CAAC;EACH,CAAC,EAAE,CAACtB,MAAM,EAAED,QAAQ,CAAC,CAAC;EAEtB,IAAI,CAACC,MAAM,EAAE;IACX,OAAO,IAAI;EACb;EAEA,MAAMuB,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIrB,SAAS,CAACa,OAAO,EAAE;MACrBb,SAAS,CAACa,OAAO,CAACS,IAAI,CAAC,gBAAgB,CAAC;MACxClB,qBAAqB,CAAC,IAAI,CAAC;IAC7B;EACF,CAAC;EAED,MAAMmB,mBAAmB,GAAGA,CAAA,KAAM;IAChC,IAAIvB,SAAS,CAACa,OAAO,EAAE;MACrBb,SAAS,CAACa,OAAO,CAACS,IAAI,CAAC,iBAAiB,EAAE;QAAEE,QAAQ,EAAE;MAAK,CAAC,CAAC;IAC/D;EACF,CAAC;EAED,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAIzB,SAAS,CAACa,OAAO,EAAE;MACrBb,SAAS,CAACa,OAAO,CAACS,IAAI,CAAC,iBAAiB,EAAE;QAAEE,QAAQ,EAAE;MAAM,CAAC,CAAC;MAC9DtB,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC;EAED,MAAMwB,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAI1B,SAAS,CAACa,OAAO,EAAE;MACrBb,SAAS,CAACa,OAAO,CAACS,IAAI,CAAC,WAAW,CAAC;MACnCtB,SAAS,CAACa,OAAO,CAACO,UAAU,CAAC,CAAC;IAChC;IACAvB,QAAQ,CAAC,GAAG,CAAC;EACf,CAAC;EAED,oBACEJ,OAAA;IAAKkC,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBnC,OAAA;MAAAmC,QAAA,EAAK9B,MAAM,CAAC+B;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACzBxC,OAAA;MAAKkC,SAAS,EAAC,OAAO;MAAAC,QAAA,gBACpBnC,OAAA;QAAAmC,QAAA,GAAG,eAAa,EAAC9B,MAAM,CAACoC,UAAU,CAAC,CAAC,CAAC,EAAC,KAAG,EAACpC,MAAM,CAACoC,UAAU,CAAC,CAAC,CAAC;MAAA;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnExC,OAAA;QAAAmC,QAAA,GAAG,cAAY,EAAC9B,MAAM,CAACqC,MAAM;MAAA;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClCxC,OAAA;QAAAmC,QAAA,GAAG,iBAAe,EAACQ,IAAI,CAACC,KAAK,CAAC,CAACvC,MAAM,CAACwC,KAAK,CAACC,QAAQ,IAAI,CAAC,IAAI,IAAI,CAAC,EAAC,GAAC;MAAA;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACxExC,OAAA;QAAAmC,QAAA,GAAG,cAAY,EAAC9B,MAAM,CAACwC,KAAK,CAACE,IAAI,IAAI,CAAC;MAAA;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxC,CAAC,EAELhC,gBAAgB,iBACfR,OAAA;MAAKkC,SAAS,EAAC,iBAAiB;MAAAC,QAAA,gBAC9BnC,OAAA;QAAAmC,QAAA,EAAG;MAAyB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAChCxC,OAAA;QAAKkC,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3BnC,OAAA;UAAQgD,OAAO,EAAElB,mBAAoB;UAACI,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAE7D;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTxC,OAAA;UAAQgD,OAAO,EAAEhB,oBAAqB;UAACE,SAAS,EAAC,aAAa;UAAAC,QAAA,EAAC;QAE/D;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAEA,CAAChC,gBAAgB,iBAChBR,OAAA;MAAKkC,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC3BnC,OAAA;QACEgD,OAAO,EAAEpB,aAAc;QACvBqB,QAAQ,EAAEvC,kBAAmB;QAC7BwB,SAAS,EAAC,aAAa;QAAAC,QAAA,EAEtBzB,kBAAkB,GAAG,yBAAyB,GAAG;MAAiB;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7D,CAAC,eACTxC,OAAA;QAAQgD,OAAO,EAAEf,YAAa;QAACC,SAAS,EAAC,UAAU;QAAAC,QAAA,EAAC;MAEpD;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACtC,EAAA,CA9HID,QAAQ;EAAA,QACKP,WAAW,EACXC,WAAW;AAAA;AAAAuD,EAAA,GAFxBjD,QAAQ;AAgId,eAAeA,QAAQ;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}