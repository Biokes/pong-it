{"ast":null,"code":"var _jsxFileName = \"/home/praise/pong-it/frontend/src/components/MultiplayerGame.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport '../styles/Game.css';\nimport { BACKEND_URL, INITIAL_RATING } from '../constants';\nimport soundManager from '../utils/soundManager';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MultiplayerGame = ({\n  username\n}) => {\n  _s();\n  var _location$state, _location$state2, _gameData$players$, _gameData$players$2;\n  const canvasRef = useRef(null);\n  const socketRef = useRef(null);\n  const [isWaiting, setIsWaiting] = useState(true);\n  const [roomCode, setRoomCode] = useState(null);\n  const [gameData, setGameData] = useState({\n    score: [0, 0],\n    ballPos: {\n      x: 0,\n      y: 0\n    },\n    paddles: {\n      player1: {\n        y: 0\n      },\n      player2: {\n        y: 0\n      }\n    },\n    players: []\n  });\n  const [isPaused, setIsPaused] = useState(false);\n  const [pausedBy, setPausedBy] = useState(null);\n  const [pausesRemaining, setPausesRemaining] = useState(2);\n  const [showRematchRequest, setShowRematchRequest] = useState(false);\n  const [rematchRequester, setRematchRequester] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const containerRef = useRef(null);\n  const prevGameDataRef = useRef(null);\n  const isMounted = useRef(false);\n  const gameMode = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.gameMode) || 'quick';\n  const joinRoomCode = (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.roomCode;\n  const drawGame = useCallback(ctx => {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    if (isWaiting) {\n      ctx.font = '24px \"Press Start 2P\"';\n      ctx.fillStyle = 'rgb(116,113,203)';\n      ctx.textAlign = 'center';\n      const dots = '.'.repeat(Math.floor(Date.now() / 500) % 4);\n      if (roomCode) {\n        ctx.fillText(`Room Code: ${roomCode}`, ctx.canvas.width / 2, ctx.canvas.height / 2 - 30);\n        ctx.fillText(`Waiting for opponent${dots}`, ctx.canvas.width / 2, ctx.canvas.height / 2 + 30);\n      } else {\n        ctx.fillText(`Waiting for opponent${dots}`, ctx.canvas.width / 2, ctx.canvas.height / 2);\n      }\n      return;\n    }\n    const {\n      width,\n      height\n    } = ctx.canvas;\n    ctx.imageSmoothingEnabled = true;\n    ctx.fillStyle = 'rgb(116,113,203)';\n    const paddleWidth = width * 0.02;\n    const paddleHeight = height * 0.2;\n    Object.values(gameData.paddles).forEach((paddle, index) => {\n      const x = index === 0 ? paddleWidth : width - paddleWidth * 2;\n      const y = (paddle.y + 1) * height / 2 - paddleHeight / 2;\n      ctx.fillRect(x, y, paddleWidth, paddleHeight);\n    });\n    ctx.fillStyle = 'rgb(253,208,64)';\n    const ballSize = width * 0.02;\n    const ballX = (gameData.ballPos.x + 1) * width / 2 - ballSize / 2;\n    const ballY = (gameData.ballPos.y + 1) * height / 2 - ballSize / 2;\n    ctx.beginPath();\n    ctx.arc(ballX + ballSize / 2, ballY + ballSize / 2, ballSize / 2, 0, Math.PI * 2);\n    ctx.fill();\n  }, [gameData, isWaiting, roomCode]);\n  const handleMouseMove = useCallback(e => {\n    if (!socketRef.current || isWaiting) return;\n    const container = containerRef.current;\n    if (!container) return;\n    const bounds = container.getBoundingClientRect();\n    const relativeY = (e.clientY - bounds.top) / bounds.height * 2 - 1;\n    const clampedY = Math.max(-1, Math.min(1, relativeY));\n    socketRef.current.emit('paddleMove', {\n      position: clampedY\n    });\n  }, [isWaiting]);\n  const handleTouchMove = useCallback(e => {\n    if (!socketRef.current || isWaiting) return;\n    e.preventDefault();\n    const container = containerRef.current;\n    if (!container) return;\n    const bounds = container.getBoundingClientRect();\n    if (e.touches && e.touches.length > 0) {\n      const touchY = e.touches[0].clientY;\n      const relativeY = (touchY - bounds.top) / bounds.height * 2 - 1;\n      const clampedY = Math.max(-1, Math.min(1, relativeY));\n      socketRef.current.emit('paddleMove', {\n        position: clampedY\n      });\n    }\n  }, [isWaiting]);\n  const handlePauseGame = useCallback(() => {\n    if (socketRef.current && !isPaused) {\n      socketRef.current.emit('pauseGame');\n    }\n  }, [isPaused]);\n  const handleForfeitGame = useCallback(() => {\n    if (window.confirm('Are you sure you want to forfeit? You will lose the game.')) {\n      if (socketRef.current) {\n        socketRef.current.emit('forfeitGame');\n      }\n    }\n  }, []);\n  const handleRematchResponse = useCallback(accepted => {\n    if (socketRef.current) {\n      socketRef.current.emit('rematchResponse', {\n        accepted\n      });\n      setShowRematchRequest(false);\n      setRematchRequester(null);\n    }\n  }, []);\n  const setupSocket = useCallback(() => {\n    if (!isMounted.current || !username) return;\n    const socket = io(BACKEND_URL, {\n      withCredentials: true,\n      transports: ['websocket'],\n      path: '/socket.io/',\n      query: {\n        username\n      }\n    });\n    socketRef.current = socket;\n    socket.on('connect', () => {\n      console.log('Connected:', socket.id);\n      const playerData = {\n        name: username,\n        rating: INITIAL_RATING,\n        socketId: socket.id\n      };\n      if (gameMode === 'create') {\n        socket.emit('createRoom', playerData);\n      } else if (gameMode === 'join' && joinRoomCode) {\n        socket.emit('joinRoom', {\n          roomCode: joinRoomCode,\n          player: playerData\n        });\n      } else {\n        socket.emit('findRandomMatch', playerData);\n      }\n    });\n    socket.on('roomCreated', data => {\n      console.log('Room created:', data.roomCode);\n      setRoomCode(data.roomCode);\n      setIsWaiting(true);\n    });\n    socket.on('waitingForOpponent', data => {\n      console.log('Waiting for opponent:', data.roomCode);\n      setRoomCode(data.roomCode);\n      setIsWaiting(true);\n    });\n    socket.on('roomReady', data => {\n      console.log('Room ready:', data);\n      setIsWaiting(true);\n    });\n    socket.on('gameStart', data => {\n      console.log('Game starting:', data);\n      setIsWaiting(false);\n      setGameData(data);\n      prevGameDataRef.current = data;\n      soundManager.startBackgroundMusic();\n    });\n    socket.on('gameUpdate', data => {\n      if (prevGameDataRef.current) {\n        var _data$ballVelocity, _prevGameDataRef$curr, _prevGameDataRef$curr2, _prevGameDataRef$curr3;\n        if ((data === null || data === void 0 ? void 0 : (_data$ballVelocity = data.ballVelocity) === null || _data$ballVelocity === void 0 ? void 0 : _data$ballVelocity.x) !== ((_prevGameDataRef$curr = prevGameDataRef.current) === null || _prevGameDataRef$curr === void 0 ? void 0 : (_prevGameDataRef$curr2 = _prevGameDataRef$curr.ballVelocity) === null || _prevGameDataRef$curr2 === void 0 ? void 0 : _prevGameDataRef$curr2.x)) {\n          soundManager.playWithErrorHandling(() => soundManager.playHitSound(), 'Hit sound failed');\n        }\n        if (data !== null && data !== void 0 && data.score && (_prevGameDataRef$curr3 = prevGameDataRef.current) !== null && _prevGameDataRef$curr3 !== void 0 && _prevGameDataRef$curr3.score && (data.score[0] !== prevGameDataRef.current.score[0] || data.score[1] !== prevGameDataRef.current.score[1])) {\n          soundManager.playWithErrorHandling(() => soundManager.playScoreSound(), 'Score sound failed');\n        }\n      }\n      setGameData(data);\n      prevGameDataRef.current = data;\n    });\n    socket.on('gameOver', result => {\n      var _result$ratings, _result$stats;\n      soundManager.playWithErrorHandling(async () => {\n        await soundManager.playGameOverSound();\n        setTimeout(() => soundManager.stopAll(), 1000);\n      }, 'Game over sound failed');\n      const isWinner = result.winner === socket.id;\n      navigate('/game-over', {\n        state: {\n          ...result,\n          isWinner,\n          message: isWinner ? 'You Won!' : 'You Lost!',\n          rating: (_result$ratings = result.ratings) === null || _result$ratings === void 0 ? void 0 : _result$ratings[socket.id],\n          finalScore: result.finalScore || ((_result$stats = result.stats) === null || _result$stats === void 0 ? void 0 : _result$stats.score)\n        }\n      });\n    });\n    socket.on('gamePaused', data => {\n      setIsPaused(true);\n      setPausedBy(data.pausedBy);\n      setPausesRemaining(data.pausesRemaining);\n    });\n    socket.on('gameResumed', () => {\n      setIsPaused(false);\n      setPausedBy(null);\n    });\n    socket.on('playerForfeited', data => {\n      soundManager.stopAll();\n      alert(`${data.forfeitedPlayer} forfeited. ${data.winner} wins!`);\n      navigate('/');\n    });\n    socket.on('rematchRequested', data => {\n      setShowRematchRequest(true);\n      setRematchRequester(data.from);\n    });\n    socket.on('rematchDeclined', () => {\n      alert('Rematch declined');\n      navigate('/');\n    });\n    socket.on('opponentLeft', () => {\n      alert('Opponent left the game');\n      navigate('/');\n    });\n    socket.on('opponentDisconnected', data => {\n      soundManager.stopAll();\n      if (data && data.winner) {\n        alert(`${data.disconnectedPlayer} disconnected. ${data.winner} wins!`);\n      } else {\n        alert('Opponent disconnected');\n      }\n      navigate('/');\n    });\n    socket.on('error', error => {\n      console.error('Socket error:', error);\n      alert('Error: ' + error.message);\n    });\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, [username, gameMode, joinRoomCode, navigate]);\n  useEffect(() => {\n    isMounted.current = true;\n    if (!username) {\n      navigate('/');\n      return;\n    }\n    const cleanup = setupSocket();\n    return () => {\n      isMounted.current = false;\n      if (cleanup) cleanup();\n    };\n  }, [setupSocket, username, navigate]);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const updateCanvasSize = () => {\n      const isMobile = window.innerWidth <= 768;\n      if (isMobile) {\n        canvas.width = window.innerWidth * 0.95;\n        canvas.height = window.innerHeight * 0.65;\n      } else {\n        canvas.width = window.innerWidth * 0.8;\n        canvas.height = window.innerHeight * 0.8;\n      }\n    };\n    updateCanvasSize();\n    window.addEventListener('resize', updateCanvasSize);\n    let animationId;\n    const gameLoop = () => {\n      drawGame(ctx);\n      animationId = requestAnimationFrame(gameLoop);\n    };\n    gameLoop();\n    return () => {\n      cancelAnimationFrame(animationId);\n      window.removeEventListener('resize', updateCanvasSize);\n    };\n  }, [drawGame]);\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n    container.addEventListener('mousemove', handleMouseMove);\n    container.addEventListener('touchmove', handleTouchMove, {\n      passive: false\n    });\n    return () => {\n      container.removeEventListener('mousemove', handleMouseMove);\n      container.removeEventListener('touchmove', handleTouchMove);\n    };\n  }, [handleMouseMove, handleTouchMove]);\n  const handleLeaveGame = useCallback(() => {\n    if (window.confirm('Are you sure you want to leave? You will forfeit the game.')) {\n      if (socketRef.current) {\n        socketRef.current.emit('forfeitGame');\n      }\n      soundManager.stopAll();\n      navigate('/');\n    }\n  }, [navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-container\",\n    ref: containerRef,\n    style: {\n      touchAction: 'none'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLeaveGame,\n      className: \"back-button\",\n      \"aria-label\": \"Leave game\",\n      children: \"\\u2190 Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), roomCode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-info\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"room-code-display\",\n        children: [\"Room: \", roomCode]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-names\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: ((_gameData$players$ = gameData.players[0]) === null || _gameData$players$ === void 0 ? void 0 : _gameData$players$.name) || 'Player 1'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: ((_gameData$players$2 = gameData.players[1]) === null || _gameData$players$2 === void 0 ? void 0 : _gameData$players$2.name) || 'Player 2'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"score-board\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: gameData.score[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: gameData.score[1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), !isWaiting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePauseGame,\n        disabled: isPaused || pausesRemaining <= 0,\n        className: \"control-btn pause-btn\",\n        children: [\"Pause (\", pausesRemaining, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleForfeitGame,\n        className: \"control-btn forfeit-btn\",\n        children: \"Forfeit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 9\n    }, this), isPaused && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pause-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pause-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Game Paused\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Paused by: \", pausedBy]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Resuming in 10 seconds...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 9\n    }, this), showRematchRequest && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rematch-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rematch-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Rematch Request\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [rematchRequester, \" wants a rematch!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rematch-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRematchResponse(true),\n            className: \"accept-btn\",\n            children: \"Accept\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRematchResponse(false),\n            className: \"decline-btn\",\n            children: \"Decline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 354,\n    columnNumber: 5\n  }, this);\n};\n_s(MultiplayerGame, \"JTwxQswnBEVl5A1CWKysWk9XtVM=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = MultiplayerGame;\nexport default MultiplayerGame;\nvar _c;\n$RefreshReg$(_c, \"MultiplayerGame\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","useNavigate","useLocation","io","BACKEND_URL","INITIAL_RATING","soundManager","jsxDEV","_jsxDEV","MultiplayerGame","username","_s","_location$state","_location$state2","_gameData$players$","_gameData$players$2","canvasRef","socketRef","isWaiting","setIsWaiting","roomCode","setRoomCode","gameData","setGameData","score","ballPos","x","y","paddles","player1","player2","players","isPaused","setIsPaused","pausedBy","setPausedBy","pausesRemaining","setPausesRemaining","showRematchRequest","setShowRematchRequest","rematchRequester","setRematchRequester","navigate","location","containerRef","prevGameDataRef","isMounted","gameMode","state","joinRoomCode","drawGame","ctx","clearRect","canvas","width","height","font","fillStyle","textAlign","dots","repeat","Math","floor","Date","now","fillText","imageSmoothingEnabled","paddleWidth","paddleHeight","Object","values","forEach","paddle","index","fillRect","ballSize","ballX","ballY","beginPath","arc","PI","fill","handleMouseMove","e","current","container","bounds","getBoundingClientRect","relativeY","clientY","top","clampedY","max","min","emit","position","handleTouchMove","preventDefault","touches","length","touchY","handlePauseGame","handleForfeitGame","window","confirm","handleRematchResponse","accepted","setupSocket","socket","withCredentials","transports","path","query","on","console","log","id","playerData","name","rating","socketId","player","data","startBackgroundMusic","_data$ballVelocity","_prevGameDataRef$curr","_prevGameDataRef$curr2","_prevGameDataRef$curr3","ballVelocity","playWithErrorHandling","playHitSound","playScoreSound","result","_result$ratings","_result$stats","playGameOverSound","setTimeout","stopAll","isWinner","winner","message","ratings","finalScore","stats","alert","forfeitedPlayer","from","disconnectedPlayer","error","removeAllListeners","disconnect","cleanup","getContext","updateCanvasSize","isMobile","innerWidth","innerHeight","addEventListener","animationId","gameLoop","requestAnimationFrame","cancelAnimationFrame","removeEventListener","passive","handleLeaveGame","className","ref","style","touchAction","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","disabled","_c","$RefreshReg$"],"sources":["/home/praise/pong-it/frontend/src/components/MultiplayerGame.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport '../styles/Game.css';\nimport { BACKEND_URL, INITIAL_RATING } from '../constants';\nimport soundManager from '../utils/soundManager';\n\nconst MultiplayerGame = ({ username }) => {\n  const canvasRef = useRef(null);\n  const socketRef = useRef(null);\n  const [isWaiting, setIsWaiting] = useState(true);\n  const [roomCode, setRoomCode] = useState(null);\n  const [gameData, setGameData] = useState({\n    score: [0, 0],\n    ballPos: { x: 0, y: 0 },\n    paddles: {\n      player1: { y: 0 },\n      player2: { y: 0 }\n    },\n    players: []\n  });\n  const [isPaused, setIsPaused] = useState(false);\n  const [pausedBy, setPausedBy] = useState(null);\n  const [pausesRemaining, setPausesRemaining] = useState(2);\n  const [showRematchRequest, setShowRematchRequest] = useState(false);\n  const [rematchRequester, setRematchRequester] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const containerRef = useRef(null);\n  const prevGameDataRef = useRef(null);\n  const isMounted = useRef(false);\n\n  const gameMode = location.state?.gameMode || 'quick';\n  const joinRoomCode = location.state?.roomCode;\n\n  const drawGame = useCallback((ctx) => {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n    if (isWaiting) {\n      ctx.font = '24px \"Press Start 2P\"';\n      ctx.fillStyle = 'rgb(116,113,203)';\n      ctx.textAlign = 'center';\n      const dots = '.'.repeat(Math.floor(Date.now() / 500) % 4);\n\n      if (roomCode) {\n        ctx.fillText(`Room Code: ${roomCode}`, ctx.canvas.width / 2, ctx.canvas.height / 2 - 30);\n        ctx.fillText(`Waiting for opponent${dots}`, ctx.canvas.width / 2, ctx.canvas.height / 2 + 30);\n      } else {\n        ctx.fillText(`Waiting for opponent${dots}`, ctx.canvas.width / 2, ctx.canvas.height / 2);\n      }\n      return;\n    }\n\n    const { width, height } = ctx.canvas;\n    ctx.imageSmoothingEnabled = true;\n\n    ctx.fillStyle = 'rgb(116,113,203)';\n    const paddleWidth = width * 0.02;\n    const paddleHeight = height * 0.2;\n\n    Object.values(gameData.paddles).forEach((paddle, index) => {\n      const x = index === 0 ? paddleWidth : width - paddleWidth * 2;\n      const y = (paddle.y + 1) * height / 2 - paddleHeight / 2;\n      ctx.fillRect(x, y, paddleWidth, paddleHeight);\n    });\n\n    ctx.fillStyle = 'rgb(253,208,64)';\n    const ballSize = width * 0.02;\n    const ballX = (gameData.ballPos.x + 1) * width / 2 - ballSize / 2;\n    const ballY = (gameData.ballPos.y + 1) * height / 2 - ballSize / 2;\n    ctx.beginPath();\n    ctx.arc(ballX + ballSize/2, ballY + ballSize/2, ballSize/2, 0, Math.PI * 2);\n    ctx.fill();\n  }, [gameData, isWaiting, roomCode]);\n\n  const handleMouseMove = useCallback((e) => {\n    if (!socketRef.current || isWaiting) return;\n\n    const container = containerRef.current;\n    if (!container) return;\n\n    const bounds = container.getBoundingClientRect();\n    const relativeY = ((e.clientY - bounds.top) / bounds.height) * 2 - 1;\n    const clampedY = Math.max(-1, Math.min(1, relativeY));\n\n    socketRef.current.emit('paddleMove', { position: clampedY });\n  }, [isWaiting]);\n\n  const handleTouchMove = useCallback((e) => {\n    if (!socketRef.current || isWaiting) return;\n\n    e.preventDefault();\n\n    const container = containerRef.current;\n    if (!container) return;\n\n    const bounds = container.getBoundingClientRect();\n\n    if (e.touches && e.touches.length > 0) {\n      const touchY = e.touches[0].clientY;\n      const relativeY = ((touchY - bounds.top) / bounds.height) * 2 - 1;\n      const clampedY = Math.max(-1, Math.min(1, relativeY));\n\n      socketRef.current.emit('paddleMove', { position: clampedY });\n    }\n  }, [isWaiting]);\n\n  const handlePauseGame = useCallback(() => {\n    if (socketRef.current && !isPaused) {\n      socketRef.current.emit('pauseGame');\n    }\n  }, [isPaused]);\n\n  const handleForfeitGame = useCallback(() => {\n    if (window.confirm('Are you sure you want to forfeit? You will lose the game.')) {\n      if (socketRef.current) {\n        socketRef.current.emit('forfeitGame');\n      }\n    }\n  }, []);\n\n  const handleRematchResponse = useCallback((accepted) => {\n    if (socketRef.current) {\n      socketRef.current.emit('rematchResponse', { accepted });\n      setShowRematchRequest(false);\n      setRematchRequester(null);\n    }\n  }, []);\n\n  const setupSocket = useCallback(() => {\n    if (!isMounted.current || !username) return;\n\n    const socket = io(BACKEND_URL, {\n      withCredentials: true,\n      transports: ['websocket'],\n      path: '/socket.io/',\n      query: { username }\n    });\n\n    socketRef.current = socket;\n\n    socket.on('connect', () => {\n      console.log('Connected:', socket.id);\n\n      const playerData = {\n        name: username,\n        rating: INITIAL_RATING,\n        socketId: socket.id\n      };\n\n      if (gameMode === 'create') {\n        socket.emit('createRoom', playerData);\n      } else if (gameMode === 'join' && joinRoomCode) {\n        socket.emit('joinRoom', { roomCode: joinRoomCode, player: playerData });\n      } else {\n        socket.emit('findRandomMatch', playerData);\n      }\n    });\n\n    socket.on('roomCreated', (data) => {\n      console.log('Room created:', data.roomCode);\n      setRoomCode(data.roomCode);\n      setIsWaiting(true);\n    });\n\n    socket.on('waitingForOpponent', (data) => {\n      console.log('Waiting for opponent:', data.roomCode);\n      setRoomCode(data.roomCode);\n      setIsWaiting(true);\n    });\n\n    socket.on('roomReady', (data) => {\n      console.log('Room ready:', data);\n      setIsWaiting(true);\n    });\n\n    socket.on('gameStart', (data) => {\n      console.log('Game starting:', data);\n      setIsWaiting(false);\n      setGameData(data);\n      prevGameDataRef.current = data;\n      soundManager.startBackgroundMusic();\n    });\n\n    socket.on('gameUpdate', (data) => {\n      if (prevGameDataRef.current) {\n        if (data?.ballVelocity?.x !== prevGameDataRef.current?.ballVelocity?.x) {\n          soundManager.playWithErrorHandling(\n            () => soundManager.playHitSound(),\n            'Hit sound failed'\n          );\n        }\n\n        if (data?.score && prevGameDataRef.current?.score &&\n            (data.score[0] !== prevGameDataRef.current.score[0] ||\n             data.score[1] !== prevGameDataRef.current.score[1])) {\n          soundManager.playWithErrorHandling(\n            () => soundManager.playScoreSound(),\n            'Score sound failed'\n          );\n        }\n      }\n\n      setGameData(data);\n      prevGameDataRef.current = data;\n    });\n\n    socket.on('gameOver', (result) => {\n      soundManager.playWithErrorHandling(\n        async () => {\n          await soundManager.playGameOverSound();\n          setTimeout(() => soundManager.stopAll(), 1000);\n        },\n        'Game over sound failed'\n      );\n\n      const isWinner = result.winner === socket.id;\n\n      navigate('/game-over', {\n        state: {\n          ...result,\n          isWinner,\n          message: isWinner ? 'You Won!' : 'You Lost!',\n          rating: result.ratings?.[socket.id],\n          finalScore: result.finalScore || result.stats?.score\n        }\n      });\n    });\n\n    socket.on('gamePaused', (data) => {\n      setIsPaused(true);\n      setPausedBy(data.pausedBy);\n      setPausesRemaining(data.pausesRemaining);\n    });\n\n    socket.on('gameResumed', () => {\n      setIsPaused(false);\n      setPausedBy(null);\n    });\n\n    socket.on('playerForfeited', (data) => {\n      soundManager.stopAll();\n      alert(`${data.forfeitedPlayer} forfeited. ${data.winner} wins!`);\n      navigate('/');\n    });\n\n    socket.on('rematchRequested', (data) => {\n      setShowRematchRequest(true);\n      setRematchRequester(data.from);\n    });\n\n    socket.on('rematchDeclined', () => {\n      alert('Rematch declined');\n      navigate('/');\n    });\n\n    socket.on('opponentLeft', () => {\n      alert('Opponent left the game');\n      navigate('/');\n    });\n\n    socket.on('opponentDisconnected', (data) => {\n      soundManager.stopAll();\n      if (data && data.winner) {\n        alert(`${data.disconnectedPlayer} disconnected. ${data.winner} wins!`);\n      } else {\n        alert('Opponent disconnected');\n      }\n      navigate('/');\n    });\n\n    socket.on('error', (error) => {\n      console.error('Socket error:', error);\n      alert('Error: ' + error.message);\n    });\n\n    return () => {\n      socket.removeAllListeners();\n      socket.disconnect();\n    };\n  }, [username, gameMode, joinRoomCode, navigate]);\n\n  useEffect(() => {\n    isMounted.current = true;\n\n    if (!username) {\n      navigate('/');\n      return;\n    }\n\n    const cleanup = setupSocket();\n\n    return () => {\n      isMounted.current = false;\n      if (cleanup) cleanup();\n    };\n  }, [setupSocket, username, navigate]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    const updateCanvasSize = () => {\n      const isMobile = window.innerWidth <= 768;\n      if (isMobile) {\n        canvas.width = window.innerWidth * 0.95;\n        canvas.height = window.innerHeight * 0.65;\n      } else {\n        canvas.width = window.innerWidth * 0.8;\n        canvas.height = window.innerHeight * 0.8;\n      }\n    };\n\n    updateCanvasSize();\n    window.addEventListener('resize', updateCanvasSize);\n\n    let animationId;\n    const gameLoop = () => {\n      drawGame(ctx);\n      animationId = requestAnimationFrame(gameLoop);\n    };\n    gameLoop();\n\n    return () => {\n      cancelAnimationFrame(animationId);\n      window.removeEventListener('resize', updateCanvasSize);\n    };\n  }, [drawGame]);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    container.addEventListener('mousemove', handleMouseMove);\n    container.addEventListener('touchmove', handleTouchMove, { passive: false });\n\n    return () => {\n      container.removeEventListener('mousemove', handleMouseMove);\n      container.removeEventListener('touchmove', handleTouchMove);\n    };\n  }, [handleMouseMove, handleTouchMove]);\n\n  const handleLeaveGame = useCallback(() => {\n    if (window.confirm('Are you sure you want to leave? You will forfeit the game.')) {\n      if (socketRef.current) {\n        socketRef.current.emit('forfeitGame');\n      }\n      soundManager.stopAll();\n      navigate('/');\n    }\n  }, [navigate]);\n\n  return (\n    <div className=\"game-container\" ref={containerRef} style={{ touchAction: 'none' }}>\n      <button onClick={handleLeaveGame} className=\"back-button\" aria-label=\"Leave game\">\n        ← Back\n      </button>\n\n      {roomCode && (\n        <div className=\"room-info\">\n          <span className=\"room-code-display\">Room: {roomCode}</span>\n        </div>\n      )}\n\n      <div className=\"player-names\">\n        <span>{gameData.players[0]?.name || 'Player 1'}</span>\n        <span>{gameData.players[1]?.name || 'Player 2'}</span>\n      </div>\n\n      <div className=\"score-board\">\n        <span>{gameData.score[0]}</span>\n        <span>{gameData.score[1]}</span>\n      </div>\n\n      {!isWaiting && (\n        <div className=\"game-controls\">\n          <button\n            onClick={handlePauseGame}\n            disabled={isPaused || pausesRemaining <= 0}\n            className=\"control-btn pause-btn\"\n          >\n            Pause ({pausesRemaining})\n          </button>\n          <button\n            onClick={handleForfeitGame}\n            className=\"control-btn forfeit-btn\"\n          >\n            Forfeit\n          </button>\n        </div>\n      )}\n\n      {isPaused && (\n        <div className=\"pause-overlay\">\n          <div className=\"pause-message\">\n            <h2>Game Paused</h2>\n            <p>Paused by: {pausedBy}</p>\n            <p>Resuming in 10 seconds...</p>\n          </div>\n        </div>\n      )}\n\n      {showRematchRequest && (\n        <div className=\"rematch-overlay\">\n          <div className=\"rematch-modal\">\n            <h2>Rematch Request</h2>\n            <p>{rematchRequester} wants a rematch!</p>\n            <div className=\"rematch-buttons\">\n              <button\n                onClick={() => handleRematchResponse(true)}\n                className=\"accept-btn\"\n              >\n                Accept\n              </button>\n              <button\n                onClick={() => handleRematchResponse(false)}\n                className=\"decline-btn\"\n              >\n                Decline\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default MultiplayerGame;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}